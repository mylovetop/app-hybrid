/*! p2p 2015-01-16 */
angular.module(Constant.CONTROLLER).controller(Constant.CTRL_PROJECT_DETAIL,["$scope","$rootScope","$routeParams",Constant.SERVICE_PROJECT,function(a,b,c,d){a.p=c,Common.setRouteTopBarBack(a.p.routeTopBarBack);var e,f=0,g=50;a.topBar={titleLeft:"项目详情",route:Constant.ROUTE_PROJECT_DETAIL,titleRight:""},a.isLoading=!0,a.showMoreBtnProject=!0,a.showFundsUse=!0,a.showGeAgcyAdvice=!0,a.showSafeguardComment=!0;var h=function(){var b=document.querySelector("#id_projectContent");a.showMoreBtnProject=null!=b&&b.scrollHeight>g?!0:!1;var c=document.querySelector("#id_fundsUse");a.showFundsUse=null!=c&&c.scrollHeight>g?!0:!1;var d=document.querySelector("#id_geAgcyAdvice");a.showGeAgcyAdvice=null!=d&&d.scrollHeight>g?!0:!1;var e=document.querySelector("#id_safeguardComment");a.showSafeguardComment=null!=e&&e.scrollHeight>g?!0:!1};d.detail({id:a.p.id}).success(function(b){a.isLoading=!1,a.projectDetail=JSON.parse(JSON.parse(b)).projectDetail,Common.hasIScroll()&&setTimeout(function(){h(),a.$apply(),0==f?(e=Common.initIScroll(),f++):e.refresh()},300)}).error(function(){a.projectDetail=[],a.isLoading=!1});var i=" detail-item-content",j="detail-item-content-show",k="查看更多",l="收  缩";a.fontProjectIntroduce=k,a.fontFundsUse=k,a.fontGeAgcyAdvice=k,a.fontSafeguardComment=k,a.cssProjectIntroduce=i,a.cssFundsUse=i,a.cssGeAgcyAdvice=i,a.cssSafeguardComment=i,a.moreProjectClick=function(b){switch(b){case 1:a.showMoreBtnProject&&(a.cssProjectIntroduce=m(a.cssProjectIntroduce),a.fontProjectIntroduce=n(a.cssProjectIntroduce));break;case 2:a.showFundsUse&&(a.cssFundsUse=m(a.cssFundsUse),a.fontFundsUse=n(a.cssFundsUse));break;case 3:break;case 4:break;case 5:a.showGeAgcyAdvice&&(a.cssGeAgcyAdvice=m(a.cssGeAgcyAdvice),a.fontGeAgcyAdvice=n(a.cssGeAgcyAdvice));break;case 6:a.showSafeguardComment&&(a.cssSafeguardComment=m(a.cssSafeguardComment),a.fontSafeguardComment=n(a.cssSafeguardComment));break;case 7:}"undefined"!=typeof e&&setTimeout(function(){e.refresh()},300)};var m=function(a){return"undefined"==typeof a||a==i?j:i},n=function(a){return"undefined"==typeof a||a==i?k:l}}]);
/*! p2p 最后修改于： 2015-01-16 */